{
  "info": {
    "name": "Permanent Subscription API",
    "description": "API para gerenciar assinaturas permanentes (vitalícias). REQUER AUTENTICAÇÃO via Supabase.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Login (Obter Cookies de Autenticação)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"{{USER_EMAIL}}\",\n  \"password\": \"{{USER_PASSWORD}}\"\n}"
        },
        "url": {
          "raw": "{{BASE_URL}}/api/auth/login",
          "host": ["{{BASE_URL}}"],
          "path": ["api", "auth", "login"]
        },
        "description": "Faça login primeiro para obter os cookies de autenticação do Supabase. Os cookies serão salvos automaticamente pelo Postman."
      },
      "response": []
    },
    {
      "name": "2. Ativar Assinatura Permanente (Bruno)",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"hasPermanentSubscription\": true\n}"
        },
        "url": {
          "raw": "{{BASE_URL}}/api/v1/profiles/f295d256-0868-4bbe-9b9c-fb6cec64ffa0/permanent-subscription",
          "host": ["{{BASE_URL}}"],
          "path": ["api", "v1", "profiles", "f295d256-0868-4bbe-9b9c-fb6cec64ffa0", "permanent-subscription"]
        },
        "description": "Ativa assinatura permanente para Bruno Marcelino. Requer autenticação de usuário master.\n\nsupabaseId: f295d256-0868-4bbe-9b9c-fb6cec64ffa0\nemail: bruno@onsidemarketing.com.br"
      },
      "response": []
    },
    {
      "name": "3. Desativar Assinatura Permanente",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"hasPermanentSubscription\": false\n}"
        },
        "url": {
          "raw": "{{BASE_URL}}/api/v1/profiles/{{SUPABASE_ID}}/permanent-subscription",
          "host": ["{{BASE_URL}}"],
          "path": ["api", "v1", "profiles", "{{SUPABASE_ID}}", "permanent-subscription"]
        },
        "description": "Remove a assinatura permanente de um usuário. Ele voltará a passar por validação no Asaas.\n\nSubstitua {{SUPABASE_ID}} pelo supabaseId do usuário."
      },
      "response": []
    },
    {
      "name": "4. Verificar Status do Usuário",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{BASE_URL}}/api/v1/profiles/{{SUPABASE_ID}}",
          "host": ["{{BASE_URL}}"],
          "path": ["api", "v1", "profiles", "{{SUPABASE_ID}}"]
        },
        "description": "Busca informações do perfil incluindo hasPermanentSubscription.\n\nPara Bruno use: f295d256-0868-4bbe-9b9c-fb6cec64ffa0"
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "BASE_URL_LOCAL",
      "value": "http://localhost:3000",
      "type": "string",
      "description": "URL base para ambiente LOCAL"
    },
    {
      "key": "BASE_URL_PROD",
      "value": "https://www.corretorstudio.com.br",
      "type": "string",
      "description": "URL base para ambiente PRODUÇÃO"
    },
    {
      "key": "BASE_URL",
      "value": "http://localhost:3000",
      "type": "string",
      "description": "URL base ativa (altere para BASE_URL_PROD em produção)"
    },
    {
      "key": "USER_EMAIL",
      "value": "bruno@onsidemarketing.com.br",
      "type": "string",
      "description": "Email de um usuário MASTER para autenticação"
    },
    {
      "key": "USER_EMAIL_2",
      "value": "matheuswillock@gmail.com",
      "type": "string",
      "description": "Email alternativo para testes"
    },
    {
      "key": "USER_PASSWORD",
      "value": "Onside@2025",
      "type": "string",
      "description": "Senha do usuário master"
    },
    {
      "key": "USER_PASSWORD_2",
      "value": "Nath@1308",
      "type": "string",
      "description": "Senha alternativa para testes (preencher quando necessário)"
    },
    {
      "key": "SUPABASE_ID",
      "value": "f295d256-0868-4bbe-9b9c-fb6cec64ffa0",
      "type": "string",
      "description": "SupabaseId do usuário (Bruno por padrão)"
    },
    {
      "key": "SUPABASE_ID_2",
      "value": "d41b5b47-9e3c-4eae-9eb6-798129c741c4",
      "type": "string",
      "description": "SupabaseId do usuário (Matheus por padrão)"
    }
  ]
}
